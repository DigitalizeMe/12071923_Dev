@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix occp: <http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@base <http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1> .

<http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1> rdf:type owl:Ontology ;
                                                                        owl:imports <http://www.w3.org/2006/time#2016> ;
                                                                        rdfs:comment "First workaround to implement time tracking features to models"@en .



#################################################################
#    Object Properties
#################################################################

###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#endsCycle
occp:endsCycle rdf:type owl:ObjectProperty ;
           rdfs:subPropertyOf <http://www.w3.org/2006/time#hasEnd> ;
           rdfs:comment "The object property \"endsCycle\" is used to mark instants that end an ongoing cycle within a phase."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#endsPhase
occp:endsPhase rdf:type owl:ObjectProperty ;
           rdfs:subPropertyOf <http://www.w3.org/2006/time#hasEnd> ;
           rdfs:comment "The object property \"endsPhase\" is used to mark instants that end an ongoing phase."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#hasPhase
occp:hasPhase rdf:type owl:ObjectProperty ;
              rdfs:comment "The property \"hasPhase\" is used to connect time instants to certain phases."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#isInPhase
occp:isInPhase rdf:type owl:ObjectProperty ;
               rdfs:comment "The property \"isInPhase\" is used for new life cycles that evolve e.g., from complex repair measures. Example: Part of a building in use is damaged and needs to be replaced. The repair measures need to be planned and so forth and thus start a new life cycle for the replacement element. This new life cycle is taking place within the repair phase of the damaged elements (\"is in Phase of the Repair Phase of said elements\"), as the rest of the building stays intact."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#phaseAfter
occp:phaseAfter rdf:type owl:ObjectProperty ;
            rdfs:subPropertyOf <http://www.w3.org/2006/time#intervalAfter> ;
            rdfs:comment "The property \"phase_after\" is used to define the correct chronological order and dependencies of phases and transitions within the OCCP."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#phaseBefore
occp:phaseBefore rdf:type owl:ObjectProperty ;
             rdfs:subPropertyOf <http://www.w3.org/2006/time#intervalBefore> ;
             rdfs:comment "The property \"phase_before\" is used to define the correct chronological order and dependencies of phases and transitions within the OCCP."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#startsCycle
occp:startsCycle rdf:type owl:ObjectProperty ;
             rdfs:subPropertyOf <http://www.w3.org/2006/time#hasBeginning> ;
             rdfs:comment "The object property \"startsCycle\" is used to mark instants that start a new cycle within a phase."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#startsPhase
occp:startsPhase rdf:type owl:ObjectProperty ;
             rdfs:subPropertyOf <http://www.w3.org/2006/time#hasBeginning> ;
             rdfs:comment "The object property \"startsPhase\" is used to mark instants that start a new phase."@en .

###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#hasMilestone
occp:hasMilestone rdf:type owl:ObjectProperty ;
              rdfs:comment "The property \"hasMilestone\" is used to connect Individuals to certain Instants (Phase Instants or Transitions)."@en .


#################################################################
#    Classes
#################################################################


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#BeginningOfPlanning
occp:BeginningOfPlanning rdf:type owl:Class ;
                         rdfs:subClassOf occp:PhaseA_Instant ;
                         rdfs:comment "The Beginning of Planning marks the date of the official start of the planning phase."@en ;
                         rdfs:label "Beginning of Planning"@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#CompletionOfPlanning
occp:CompletionOfPlanning rdf:type owl:Class ;
                          rdfs:subClassOf occp:Transition ;
                          rdfs:comment """This instant serves as a transition from the planning phase to the tendering process and marks the point in time of the last planning review acceptance of a building/construction.
This instant marks the end of the planning phase.""" .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#Cycle
occp:Cycle rdf:type owl:Class ;
           rdfs:subClassOf <http://www.w3.org/2006/time#Interval> ;
           rdfs:comment "A cycle is a time span with recurring periods, defined by a starting point in time, a period and a duration. The duration must be greater than the period and the duration must be an integer multiple of the period. Cycles are always within phases. They are used to keep track of interating processes, like multiple reviews during the planning phase, where each rejection of the reviewer causes another planning (and reviewing) cycle."^^rdfs:Literal .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#DataProcurement
occp:DataProcurement rdf:type owl:Class ;
                     rdfs:subClassOf occp:PhaseA_Instant ;
                     rdfs:comment """Marks the date of data procurement measures like geodetic procurement actions or the date a set of data was added to the planning data sets/planning model.
Since many procurement measures can be necessary, the instants can be counted."""@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#Edit_ASTR
occp:Edit_ASTR rdf:type owl:Class ;
               rdfs:subClassOf occp:PhaseA_Instant ;
               rdfs:comment """ASTR = after submission to review
This instant is used to mark the date that major or significant changes are made to a planning model after the draft is submitted to the reviewer. 
Since many changes of this type are possible, multiple entries are possible."""@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#Edit_BSTR
occp:Edit_BSTR rdf:type owl:Class ;
               rdfs:subClassOf occp:PhaseA_Instant ;
               rdfs:comment """BSTR = Before submission to review
This instant is used to mark the date that major or significant changes are made to a planning model before the draft is submitted to the reviewer. 
Since many changes of this type are possible, multiple entries are possible."""@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#Phase
occp:Phase rdf:type owl:Class ;
           rdfs:subClassOf <http://www.w3.org/2006/time#Interval> ;
           rdfs:comment "Phases describe the main blocks of the life cycle of a building within the chronology. The order is based on the general approach of planning, building, using, maintaining and deconstruction an object in civil engineering. It is a suggestion for a base chronological structure that can be edited and expanded as needed to fit the use case."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#PhaseA_Instant
occp:PhaseA_Instant rdf:type owl:Class ;
                    rdfs:subClassOf <http://www.w3.org/2006/time#Instant> ;
                    rdfs:comment "Contains all instants that are within Phase A - Planning Phase"@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#PhaseA_Planning
occp:PhaseA_Planning rdf:type owl:Class ;
                     rdfs:subClassOf occp:Phase ;
                     rdfs:comment "This phase describes the planning phase. It begins with the beginning of planning and ends with the transition \"CompletionOfPlanning\"."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#PhaseB_Instant
occp:PhaseB_Instant rdf:type owl:Class ;
                    rdfs:subClassOf <http://www.w3.org/2006/time#Instant> ;
                    rdfs:comment "Contains all instants that are within Phase B - Review Phase"@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#PhaseB_Review
occp:PhaseB_Review rdf:type owl:Class ;
                   rdfs:subClassOf occp:Phase ;
                   rdfs:comment "This phase describes the review phase. It begins with the first submission to review  and ends with the transition \"CompletionOfPlanning\"."@en .



###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#ReviewApproval
occp:ReviewApproval rdf:type owl:Class ;
                    rdfs:subClassOf occp:PhaseB_Instant ;
                    rdfs:comment "This instant marks the point in time of the acceptance of a planning model by the reviewer. It also marks the end of the planning and review phases for the reviewed and approved model or model component."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#ReviewRejection
occp:ReviewRejection rdf:type owl:Class ;
                     rdfs:subClassOf occp:PhaseB_Instant ;
                     rdfs:comment "This instant marks the point in time of the rejection of a planning model by the reviewer. The number of rejections can be counted."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#ReviewStart
occp:ReviewStart rdf:type owl:Class ;
                 rdfs:subClassOf occp:PhaseB_Instant ;
                 rdfs:comment "This instant marks the starting point of the reviewing process. The number of starting points (in case of a rejection and restart of the review) can be counted."@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#SubmissionToReview
occp:SubmissionToReview rdf:type owl:Class ;
                        rdfs:subClassOf occp:PhaseA_Instant ;
                        rdfs:comment """This instant marks the date of the submission of a planning draft or model to the reviewer. It starts the reviewing process and thus Phase B. 
Since many iterations may be needed to get the reviewers approval, the number of submissions is counted."""@en .


###  http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#Transition
occp:Transition rdf:type owl:Class ;
                rdfs:subClassOf <http://www.w3.org/2006/time#Instant> ;
                rdfs:comment "Transitions mark key milestones between phases or special triggering events regarding a project - not single components. They are used to mark important dates for recording events, usually triggering the beginning of the next consecutive phase of the project and/or marking the completion of a phase."@en .



### SHAPES PHASE A - PLANNING

# PHASE ASSIGNMENT

    osh:PhaseAInstantsShape a sh:NodeShape ;
        sh:targetClass occp:PhaseA_Instant ;
        sh:property [
            sh:path occp:hasPhase ;                 #All Phase A Instants belong to Phase A (Planning).
            sh:class occp:PhaseA_Planning ;
            sh:message "Wrong Phase assignment - Instant should belong to Phase A (Planning)." ;
            sh:severity sh:Warning ;
        ] .
 
# Instants

    osh:BeginningOfPlanningShape a sh:NodeShape ;
        sh:targetClass occp:BeginningOfPlanning ;
        sh:property [
            sh:path time:before ;
            sh:class occp:DataProcurement ;
            sh:message "Wrong assignment (Beginning Of Planning/Data Procurement)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Beginning Of Planning must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path occp:startsPhase ;          #Instant (Beginning Of Planning) starts a new Phase A (Planning).
            sh:class occp:PhaseA_Planning ;
        ] .

    osh:DataProcurementShape a sh:NodeShape ;
        sh:targetClass occp:DataProcurement ;
        sh:property [
            sh:path time:before ;
            sh:class occp:Edit_BSTR ;
            sh:message "Wrong assignment (Data Procurement/Edit Before Submission To Review)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Data Procurement must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] .

    osh:Edit_BSTRShape a sh:NodeShape ;
        sh:targetClass occp:Edit_BSTR ;
        sh:property [
            sh:path time:before ;
            sh:class occp:SubmissionToReview ;
            sh:message "Wrong assignment (Edit Before Submission To Review/Submission To Review)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Edit Before Submission To Review must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] .

    osh:SubmissionToReviewShape a sh:NodeShape ;
        sh:targetClass occp:SubmissionToReview ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Submission To Review must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] .

    osh:Edit_ASTRShape a sh:NodeShape ;
        sh:targetClass occp:Edit_ASTR ;
        sh:property [
            sh:path time:after ;
            sh:class occp:SubmissionToReview ;
            sh:message "Wrong assignment (Submission To Review/Edit After Submission To Review)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:after ;
            sh:class occp:ReviewRejection ;
            sh:message "Wrong assignment (Edit After Submission To Review/Review Rejection)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Edit After Submission To Review must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] .


### SHAPES PHASE B - REVIEW

# PHASE ASSIGNMENT

    osh:PhaseBInstantsShape a sh:NodeShape ;
        sh:targetClass occp:PhaseB_Instant ;
        sh:property [
            sh:path occp:hasPhase ;                 #All Phase B Instants belong to Phase B (Review).
            sh:class occp:PhaseB_Review ;
            sh:message "Wrong Phase assignment - Instant should belong to Phase B (Review)." ;
            sh:severity sh:Warning ;
        ] .

# Instants

    osh:ReviewStartShape a sh:NodeShape ;
        sh:targetClass occp:ReviewStart ;
        sh:property [
            sh:path time:after ;
            sh:class occp:SubmissionToReview ;
            sh:message "Wrong assignment (Review Start/Submission To Review)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Review Start must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path occp:startsCycle ;          #ReviewStart starts a new cycle (PlanningReview).
            sh:class occp:CycleA_PlanningReview ;
        ] .

    osh:ReviewApprovalShape a sh:NodeShape ;
        sh:targetClass occp:ReviewApproval ;
        sh:property [
            sh:path time:after ;
            sh:class occp:ReviewStart ;
            sh:message "Wrong assignment (Review Start/Review Approval)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Review Approval must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path occp:endsCycle ;          #ReviewApproval ends an ongoing cycle (PlanningReview).
            sh:class occp:CycleA_PlanningReview ;
        ] .

    osh:ReviewRejectionShape a sh:NodeShape ;
        sh:targetClass occp:ReviewRejection ;
        sh:property [
            sh:path time:after ;
            sh:class occp:ReviewStart ;
            sh:message "Wrong assignment (Review Start/Review Rejection)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:before ;
            sh:class occp:Edit_ASTR ;
            sh:message "Wrong assignment (Review Rejection/Edit After Submission To Review)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Review Rejection must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path occp:endsCycle ;          #ReviewApproval ends an ongoing cycle (PlanningReview).
            sh:class occp:CycleA_PlanningReview ;
        ] .

# Transition

    osh:CompletionOfPlanningShape a sh:NodeShape ;
        sh:targetClass occp:CompletionOfPlanning ;
        sh:property [
            sh:path time:after ;
            sh:class occp:PhaseB_Review;
            sh:message "Wrong assignment (Phase B (Review)/Transition - Completion Of Planning)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:before ;
            sh:class occp:BeginOfTenderingProcess ;
            sh:message "Wrong assignment (Transition - Completion Of Planning/Transition - Begin Of Tendering Process)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Review Rejection must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path occp:endsPhase ;            #Completion of Planningmarks the end of Phase B.
            sh:class occp:PhaseB_Review ;
        ] .

# Cycles

    osh:CycleAShape a sh:NodeShape ;
        sh:targetClass occp:CycleA_PlanningReview ;
        sh:property [
            sh:path occp:isInPhase ;
            sh:class occp:PhaseB_Review ;
        ] .