@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh:    <http://www.w3.org/ns/shacl#> .
@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:   <http://www.w3.org/2002/07/owl#> .
@prefix occp:  <http://www.semanticweb.org/albrechtvaatz/ontologies/2022/9/cMod_V0.1#> .
@prefix time:  <http://www.w3.org/2006/time#> .
@prefix osh:   <http://www.occpshape.de/shape#> .

### SHAPES PHASE A - PLANNING

    osh:BeginningOfPlanningShape a sh:NodeShape ;   #Instant Beginning Of Planning (Phase A - Planning)
        sh:targetClass occp:BeginningOfPlanning ;   
        sh:property [                               #Instant (Beginning Of Planning) starts a new Phase A (Planning).
            sh:path occp:startsPhase ;              
            sh:class occp:PhaseA_Planning ;
        ] ;
        sh:property [                               #Instant's chronological order within the Phase
            sh:path time:before ;                   
            sh:class occp:DataProcurement ;
            sh:message "Wrong assignment (chronological order) of Beginning Of Planning or Data Procurement." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [                               #Instant has a date as time stamp.
            sh:path time:hasTime ;                  
            sh:minCount 1 ;
            sh:datatype xsd:date ;
            sh:message "Missing date for Beginning Of Planning or wrong format - min. count = 1, format = YYYY-MM-DD." ;
            sh:severity sh:Warning ;
        ] .

    osh:DataProcurementShape a sh:NodeShape ;       #Instant Data Procurement (Phase A - Planning)
        sh:targetClass occp:DataProcurement ;       
        sh:property [                               #Instant's chronological order within the Phase
            sh:path time:after ;                    
            sh:class occp:BeginningOfPlanning ;
            sh:message "Wrong assignment (chronological order) of Data Procurement or Beginning Of Planning." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [                               #Instant's chronological order within the Phase
            sh:path time:before ;                   
            sh:class occp:SubmissionToReview ;
            sh:message "Wrong assignment (chronological order) of Data Procurement or Submission To Review." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [                               #Instant has a date as time stamp.
            sh:path time:hasTime ;                  
            sh:datatype xsd:date ;
            sh:message "Missing date for Data Procurement or wrong format - min. count = 1, format = YYYY-MM-DD." ;
            sh:severity sh:Warning ;
        ] .

    osh:Edit_BSTRShape a sh:NodeShape ;             #Instant Edit Before Submission To Review (Phase A - Planning)
        sh:targetClass occp:Edit_BSTR ; 
        sh:property [                               #Instant's chronological order within the Phase
            sh:path time:after ;                    
            sh:class occp:BeginningOfPlanning ;
            sh:message "Wrong assignment (chronological order) of Edit Before Submission To Review or Beginning Of Planning." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [                               #Instant's chronological order within the Phase
            sh:path time:before ;                   
            sh:class occp:SubmissionToReview ;
            sh:message "Wrong assignment (chronological order) of Edit Before Submission To Review or Submission To Review." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [                               #Instant has a date as time stamp.
            sh:path time:hasTime ;                  
            sh:datatype xsd:date ;
            sh:minCount 1 ;
            sh:message "Missing date for Edit Before Submission To Review or wrong format - min. count = 1, format = YYYY-MM-DD." ;
            sh:severity sh:Warning ;
        ] .

    osh:SubmissionToReviewShape a sh:NodeShape ;    #Instant Submission To Review (Phase A - Planning)
        sh:targetClass occp:SubmissionToReview ;
        sh:property [                               #Instant's chronological order within the Phase
            sh:path time:after ;                    
            sh:class occp:Edit_BSTR ;
            sh:message "Wrong assignment (chronological order) of Submission To Review or Edit Before Submission To Review." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [                               #Instant has a date as time stamp.
            sh:path time:hasTime ;              
            sh:datatype xsd:date ;
            sh:minCount 1 ;
            sh:message "Missing date for Submission To Review or wrong format - min. count = 1, format = YYYY-MM-DD." ;
            sh:severity sh:Warning ;
        ] .

    osh:Edit_ASTRShape a sh:NodeShape ;             #Instant Edit After Submission To Review (Phase A - Planning)
        sh:targetClass occp:Edit_ASTR ;
        sh:property [
            sh:path time:after ;
            sh:qualifiedValueShape [
                sh:class occp:SubmissionToReview ;
            ] ;
            sh:qualifiedMinCount 1 ;
            sh:message "Wrong assignment (Submission To Review/Edit After Submission To Review)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:after ;
            sh:qualifiedValueShape [
                sh:class occp:ReviewRejection ;
            ] ;
            sh:qualifiedMinCount 1 ;
            sh:message "Wrong assignment (Edit After Submission To Review/Review Rejection)." ;
            sh:severity sh:Warning ;
        ] ;
        sh:property [
            sh:path time:hasTime ;              #Instant needs a date as time stamp.
            sh:datatype xsd:date ;
            sh:message "The time stamp of the Edit After Submission To Review must be in xsd:date format (YYYY-MM-DD)." ;
            sh:severity sh:Warning ;
        ] .

# PHASE ASSIGNMENT

    osh:PhaseAInstantShape a sh:NodeShape ;
        sh:targetClass occp:PhaseA_Instant ;
        sh:property [
            sh:path occp:hasPhase ;
            sh:class occp:PhaseA_Planning ;
        ] .

